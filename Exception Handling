PART 1ï¸âƒ£ â€” WHERE LARAVEL HANDLES ERRORS

ğŸ“„ Main file

app/Exceptions/Handler.php


This file controls:

HTTP exceptions (404, 403)

Validation errors

Authentication errors

API vs Web response format

PART 2ï¸âƒ£ â€” CUSTOM ERROR PAGES (WEB USERS)
1ï¸âƒ£ Create Custom Error Views

ğŸ“ Folder

resources/views/errors/

ğŸ”¹ 404 Page

ğŸ“„ 404.blade.php

<h1>404 - Page Not Found</h1>
<p>The page you are looking for does not exist.</p>
<a href="/">Go Home</a>

ğŸ”¹ 403 Page

ğŸ“„ 403.blade.php

<h1>403 - Access Denied</h1>
<p>You are not allowed to access this page.</p>

ğŸ”¹ 500 Page

ğŸ“„ 500.blade.php

<h1>Something went wrong!</h1>
<p>Please try again later.</p>


âœ” Laravel auto-loads these
âœ” No extra config needed

PART 3ï¸âƒ£ â€” CUSTOM API ERROR RESPONSES (JSON)
2ï¸âƒ£ Detect API Requests

Laravel checks:

$request->expectsJson()


This is key ğŸ”¥

3ï¸âƒ£ Customize API Errors in Handler

ğŸ“„ File

app/Exceptions/Handler.php

ğŸ”¹ 404 (API)
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;

public function render($request, Throwable $exception)
{
    if ($request->expectsJson()) {

        if ($exception instanceof NotFoundHttpException) {
            return response()->json([
                'success' => false,
                'message' => 'Resource not found'
            ], 404);
        }
    }

    return parent::render($request, $exception);
}

ğŸ”¹ 403 (Unauthorized / Forbidden)
use Illuminate\Auth\Access\AuthorizationException;

if ($exception instanceof AuthorizationException) {
    return response()->json([
        'success' => false,
        'message' => 'You are not authorized'
    ], 403);
}

ğŸ”¹ 500 (Server Error)
if ($exception instanceof \Exception) {
    return response()->json([
        'success' => false,
        'message' => 'Internal Server Error'
    ], 500);
}

PART 4ï¸âƒ£ â€” VALIDATION ERRORS (WEB vs API)
4ï¸âƒ£ Validation Errors (API)

Laravel already returns JSON for APIs, but you can customize it.

ğŸ“„ Form Request

app/Http/Requests/StoreProductRequest.php

protected function failedValidation(Validator $validator)
{
    throw new HttpResponseException(
        response()->json([
            'success' => false,
            'errors' => $validator->errors()
        ], 422)
    );
}

ğŸ”¹ API Validation Response
{
  "success": false,
  "errors": {
    "name": ["The name field is required."]
  }
}

5ï¸âƒ£ Validation Errors (Web)

Laravel automatically:

Redirects back

Shows errors in Blade

@error('name')
    <span class="text-danger">{{ $message }}</span>
@enderror


âœ” No extra config needed

PART 5ï¸âƒ£ â€” AUTH ERRORS (401)
ğŸ”¹ Customize Unauthenticated Response

ğŸ“„ Handler.php

use Illuminate\Auth\AuthenticationException;

protected function unauthenticated($request, AuthenticationException $exception)
{
    if ($request->expectsJson()) {
        return response()->json([
            'message' => 'Unauthenticated'
        ], 401);
    }

    return redirect()->guest(route('login'));
}


âœ” Web â†’ login page
âœ” API â†’ JSON

PART 6ï¸âƒ£ â€” STANDARD API ERROR FORMAT (BEST PRACTICE ğŸ”¥)

Use a consistent structure:

{
  "success": false,
  "message": "Error message",
  "errors": []
}


Example helper:

function apiError($message, $code = 400, $errors = [])
{
    return response()->json([
        'success' => false,
        'message' => $message,
        'errors' => $errors
    ], $code);
}
