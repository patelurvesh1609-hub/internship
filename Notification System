PART 1Ô∏è‚É£ ‚Äî BASIC SETUP

1Ô∏è‚É£ Notifications Table (REQUIRED for DB üî•)
php artisan notifications:table
php artisan migrate

notifications

2Ô∏è‚É£ User Model Setup

app/Models/User.php

use Illuminate\Notifications\Notifiable;

class User extends Authenticatable
{
    use Notifiable;
}

PART 2Ô∏è‚É£ ‚Äî CREATE NOTIFICATION CLASS

3Ô∏è‚É£ Create Notification
php artisan make:notification OrderPlaced

app/Notifications/OrderPlaced.php

PART 3Ô∏è‚É£ ‚Äî DEFINE CHANNELS (EMAIL + DATABASE)

üìÑ OrderPlaced.php

app/Notifications/OrderPlaced.php

<?php

namespace App\Notifications;

use Illuminate\Bus\Queueable;
use Illuminate\Notifications\Notification;
use Illuminate\Notifications\Messages\MailMessage;

class OrderPlaced extends Notification
{
    use Queueable;

    public function via($notifiable)
    {
        return ['mail', 'database'];
    }

    // EMAIL
    public function toMail($notifiable)
    {
        return (new MailMessage)
            ->subject('Order Confirmed')
            ->greeting('Hello ' . $notifiable->name)
            ->line('Your order has been placed successfully.')
            ->action('View Order', url('/orders'))
            ->line('Thank you for shopping with us!');
    }

    // DATABASE
    public function toDatabase($notifiable)
    {
        return [
            'message' => 'Your order has been placed successfully',
            'url' => '/orders',
        ];
    }
}

PART 4Ô∏è‚É£ ‚Äî SEND NOTIFICATION

4Ô∏è‚É£ Send to Single User

üìÑ Controller

app/Http/Controllers/OrderController.php

use App\Models\User;
use App\Notifications\OrderPlaced;

public function store()
{
    $user = User::find(1);

    $user->notify(new OrderPlaced());

    return "Notification sent";
}

5Ô∏è‚É£ Send to Multiple Users
use Illuminate\Support\Facades\Notification;

Notification::send(User::all(), new OrderPlaced());

PART 5Ô∏è‚É£ ‚Äî EMAIL CONFIGURATION (IMPORTANT üî•)

.env

MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your@gmail.com
MAIL_PASSWORD=app_password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=your@gmail.com
MAIL_FROM_NAME="Laravel App"

PART 6Ô∏è‚É£ ‚Äî READ DATABASE NOTIFICATIONS

6Ô∏è‚É£ Fetch Notifications (Controller)
auth()->user()->notifications;


Unread only:

auth()->user()->unreadNotifications;

7Ô∏è‚É£ Show in Blade

üìÑ Blade

resources/views/notifications.blade.php

@foreach(auth()->user()->notifications as $notification)
    <p>
        {{ $notification->data['message'] }}
        <a href="{{ $notification->data['url'] }}">View</a>
    </p>
@endforeach

8Ô∏è‚É£ Mark as Read
auth()->user()->unreadNotifications->markAsRead();


Or single:

$notification->markAsRead();

PART 7Ô∏è‚É£ ‚Äî QUEUE NOTIFICATIONS (ADVANCED üî•)
class OrderPlaced extends Notification implements ShouldQueue
