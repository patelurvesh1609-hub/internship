PART 1ï¸âƒ£ â€” BASIC SETUP

1ï¸âƒ£ Create Storage Symlink (MANDATORY ğŸ”¥)
php artisan storage:link

public/storage â†’ storage/app/public

PART 2ï¸âƒ£ â€” DATABASE SETUP

2ï¸âƒ£ Migration (Add Image Column)

database/migrations/xxxx_add_image_to_products_table.php

$table->string('image')->nullable();

php artisan migrate

PART 3ï¸âƒ£ â€” IMAGE UPLOAD FORM

ğŸ“„ Blade File

resources/views/products/create.blade.php

<form method="POST" action="{{ route('products.store') }}" enctype="multipart/form-data">
    @csrf

    <input type="text" name="name" placeholder="Product Name">

    <input type="file" name="image">

    <button type="submit">Save</button>
</form>


âš ï¸ enctype="multipart/form-data" is REQUIRED

PART 4ï¸âƒ£ â€” CONTROLLER LOGIC (UPLOAD IMAGE)

ğŸ“„ Controller

app/Http/Controllers/ProductController.php

use App\Models\Product;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Storage;

class ProductController extends Controller
{
    public function store(Request $request)
    {
        $request->validate([
            'name'  => 'required',
            'image' => 'required|image|mimes:jpg,jpeg,png|max:2048',
        ]);

        $imagePath = $request->file('image')
                             ->store('products', 'public');

        Product::create([
            'name'  => $request->name,
            'image' => $imagePath,
        ]);

        return redirect()->back()->with('success', 'Product saved');
    }
}

PART 5ï¸âƒ£ â€” DISPLAY IMAGE

ğŸ“„ Blade

resources/views/products/index.blade.php

<img src="{{ asset('storage/'.$product->image) }}" width="120">

PART 6ï¸âƒ£ â€” UPDATE IMAGE (DELETE OLD ğŸ”¥)
public function update(Request $request, Product $product)
{
    if ($request->hasFile('image')) {

        // delete old image
        Storage::disk('public')->delete($product->image);

        // upload new image
        $product->image = $request->file('image')
                                  ->store('products', 'public');
    }

    $product->name = $request->name;
    $product->save();

    return redirect()->back();
}

PART 7ï¸âƒ£ â€” DELETE IMAGE WITH RECORD
public function destroy(Product $product)
{
    Storage::disk('public')->delete($product->image);
    $product->delete();

    return redirect()->back();
}
